VAR.Attribute="SimpleArea",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Mixed or Unlabeled",
ColumnPrefix="pPSR",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionHistoryBucketPlatformSubCustomerMajorCommand.csv",
VAR.Attribute="ProductOrServiceArea",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pPsc",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
# debug(statistics.pivot)
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionPricingVehicleHistoryMajorCommand.csv",
VAR.Attribute="Pricing.Mechanism.hypothesis.detail",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pPrice",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionPricingVehicleHistoryMajorCommand.csv",
VAR.Attribute="Pricing.Mechanism.Fee",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pFee",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionPricingVehicleHistoryMajorCommand.csv",
VAR.Attribute="Vehicle.IDVorAward",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pIDV",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
# debug(statistics.pivot)
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionPricingVehicleHistoryMajorCommand.csv",
VAR.Attribute="Vehicle.hypothesis",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pVeh",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionPricingVehicleHistoryMajorCommand.csv",
VAR.Attribute="Competition.detail",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pComp",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
mcc.competition.combined<-plyr::join(mcc.competition.combined,competition.statistics.offers(
Path,
"data\\defense_Office_SP_DefenseCompetitionPricingVehicleHistoryMajorCommand.csv",
"MajorCommandID",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
)
)
mcc.competition.combined<-plyr::join(mcc.competition.combined,
competition.statistics.size(Path
,"data\\Defense_Contract_SP_ContractSizeforCompetitionStudyMajorCommand.csv"
,"MajorCommandID",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
)
)
summary(mcc.competition.combined)
mcc.competition.combined$TotalThreshold<- cut2(mcc.competition.combined$TotalValue,cuts=c(1000000,10000000,100000000))
mcc.competition.combined$AnnualThreshold<- cut2(mcc.competition.combined$MaxAnnualValue,cuts=c(1000000,10000000,100000000))
mcc.competition.combined$Exclude[mcc.competition.combined$MajorCommandID %in% c("ORG-2841",
"ORG-2776",
"ORG-4793",
"ORG-2849",
"ORG-2762",
"ORG-4020",
"ORG-2840",
"ORG-2757"
)]<-TRUE
summary(mcc.competition.combined$Threshold)
summary(mcc.competition.combined[mcc.competition.combined$MajorCommandID %in% c("ORG-2841",
"ORG-2776",
"ORG-4793",
"ORG-2849",
"ORG-2762",
"ORG-4020",
"ORG-2840",
"ORG-2757"),c("TotalValue","MaxAnnualValue")]
)
summary(mcc.competition.combined[!mcc.competition.combined$MajorCommandID %in% c("ORG-2841",
"ORG-2776",
"ORG-4793",
"ORG-2849",
"ORG-2762",
"ORG-4020",
"ORG-2840",
"ORG-2757"),c("TotalValue","MaxAnnualValue")]
)
#
# ggplot(data=mcc.competition.combined,
#        aes(x=MaxAnnualValue,fill=Threshold))+geom_bar()+scale_x_log10(labels = comma)+#bin=0.01))+
#     facet_wrap(~Exclude,ncol=1)
#
#
# ggplot(data=mcc.competition.combined,
#        aes(x=TotalValue,fill=Threshold))+geom_bar()+scale_x_log10(labels = comma)+#bin=0.01))+
#     facet_wrap(~Exclude,ncol=1)
MCCshortList<-subset(mcc.competition.combined,!MajorCommandID %in% c("ORG-2841",
"ORG-2776",
"ORG-4793",
"ORG-2849",
"ORG-2762",
"ORG-4020",
"ORG-2840",
"ORG-2757")
)
mcc.competition.combined$Exclude<-FALSE
mcc.competition.combined$Exclude[mcc.competition.combined$MajorCommandID %in% c("ORG-2841",
"ORG-2776",
"ORG-4793",
"ORG-2849",
"ORG-2762",
"ORG-4020",
"ORG-2840",
"ORG-2757")]<-TRUE
write.table(mcc.competition.combined
,file="data\\defense_mcc_competition_combined_2014.csv"
#   ,header=TRUE
, sep=","
, row.names=FALSE
, append=FALSE
)
mcc.competition.combined<-statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionHistoryBucketPlatformSubCustomerMajorCommand.csv",
VAR.Attribute="Competition.effective.only",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pCEff",
LimitFiscalYear=2014,
ExcludeFiscalYear=TRUE
)
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionHistoryBucketPlatformSubCustomerMajorCommand.csv",
VAR.Attribute="PlatformPortfolio.sum",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pPlat",
LimitFiscalYear=2014,
ExcludeFiscalYear=TRUE
))
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionHistoryBucketPlatformSubCustomerMajorCommand.csv",
VAR.Attribute="SimpleArea",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Mixed or Unlabeled",
ColumnPrefix="pPSR",
LimitFiscalYear=2014,
ExcludeFiscalYear=TRUE
))
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionHistoryBucketPlatformSubCustomerMajorCommand.csv",
VAR.Attribute="ProductOrServiceArea",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pPsc",
LimitFiscalYear=2014,
ExcludeFiscalYear=TRUE
))
# debug(statistics.pivot)
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionPricingVehicleHistoryMajorCommand.csv",
VAR.Attribute="Pricing.Mechanism.hypothesis.detail",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pPrice",
LimitFiscalYear=2014,
ExcludeFiscalYear=TRUE
))
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionPricingVehicleHistoryMajorCommand.csv",
VAR.Attribute="Pricing.Mechanism.Fee",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pFee",
LimitFiscalYear=2014,
ExcludeFiscalYear=TRUE
))
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionPricingVehicleHistoryMajorCommand.csv",
VAR.Attribute="Vehicle.IDVorAward",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pIDV",
LimitFiscalYear=2014,
ExcludeFiscalYear=TRUE
))
# debug(statistics.pivot)
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionPricingVehicleHistoryMajorCommand.csv",
VAR.Attribute="Vehicle.hypothesis",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pVeh",
LimitFiscalYear=2014,
ExcludeFiscalYear=TRUE
))
mcc.competition.combined<-plyr::join(mcc.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Office_SP_DefenseCompetitionPricingVehicleHistoryMajorCommand.csv",
VAR.Attribute="Competition.detail",
VAR.UnitOfAnalysis="MajorCommandID",
UnlabeledValue="Unlabeled",
ColumnPrefix="pComp",
LimitFiscalYear=2014,
ExcludeFiscalYear=TRUE
))
mcc.competition.combined<-plyr::join(mcc.competition.combined,competition.statistics.offers(
Path,
"data\\defense_Office_SP_DefenseCompetitionPricingVehicleHistoryMajorCommand.csv",
"MajorCommandID",
LimitFiscalYear=2014,
ExcludeFiscalYear=TRUE
)
)
mcc.competition.combined<-plyr::join(mcc.competition.combined,
competition.statistics.size(Path
,"data\\Defense_Contract_SP_ContractSizeforCompetitionStudyMajorCommand.csv"
,"MajorCommandID",
LimitFiscalYear=2014,
ExcludeFiscalYear=TRUE
)
)
summary(mcc.competition.combined)
mcc.competition.combined$TotalThreshold<- cut2(mcc.competition.combined$TotalValue,cuts=c(1000000,10000000,100000000))
mcc.competition.combined$AnnualThreshold<- cut2(mcc.competition.combined$MaxAnnualValue,cuts=c(1000000,10000000,100000000))
mcc.competition.combined$Exclude[mcc.competition.combined$MajorCommandID %in% c("ORG-2841",
"ORG-2776",
"ORG-4793",
"ORG-2849",
"ORG-2762",
"ORG-4020",
"ORG-2840",
"ORG-2757"
)]<-TRUE
summary(mcc.competition.combined$Threshold)
summary(mcc.competition.combined[mcc.competition.combined$MajorCommandID %in% c("ORG-2841",
"ORG-2776",
"ORG-4793",
"ORG-2849",
"ORG-2762",
"ORG-4020",
"ORG-2840",
"ORG-2757"),c("TotalValue","MaxAnnualValue")]
)
summary(mcc.competition.combined[!mcc.competition.combined$MajorCommandID %in% c("ORG-2841",
"ORG-2776",
"ORG-4793",
"ORG-2849",
"ORG-2762",
"ORG-4020",
"ORG-2840",
"ORG-2757"),c("TotalValue","MaxAnnualValue")]
)
#
# ggplot(data=mcc.competition.combined,
#        aes(x=MaxAnnualValue,fill=Threshold))+geom_bar()+scale_x_log10(labels = comma)+#bin=0.01))+
#     facet_wrap(~Exclude,ncol=1)
#
#
# ggplot(data=mcc.competition.combined,
#        aes(x=TotalValue,fill=Threshold))+geom_bar()+scale_x_log10(labels = comma)+#bin=0.01))+
#     facet_wrap(~Exclude,ncol=1)
MCCshortList<-subset(mcc.competition.combined,!MajorCommandID %in% c("ORG-2841",
"ORG-2776",
"ORG-4793",
"ORG-2849",
"ORG-2762",
"ORG-4020",
"ORG-2840",
"ORG-2757")
)
mcc.competition.combined$Exclude<-FALSE
mcc.competition.combined$Exclude[mcc.competition.combined$MajorCommandID %in% c("ORG-2841",
"ORG-2776",
"ORG-4793",
"ORG-2849",
"ORG-2762",
"ORG-4020",
"ORG-2840",
"ORG-2757")]<-TRUE
write.table(mcc.competition.combined
,file="data\\defense_mcc_competition_combined_2000-2013.csv"
#   ,header=TRUE
, sep=","
, row.names=FALSE
, append=FALSE
)
state.competition.combined<-statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_location_SP_DefenseCompetitionPoPstateHistoryBucketPlatformSubCustomer.csv",
VAR.Attribute="Competition.effective.only",
VAR.UnitOfAnalysis="PoPstateCode",
UnlabeledValue="Unlabeled",
ColumnPrefix="pCEff",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
)
state.competition.combined<-plyr::join(state.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_location_SP_DefenseCompetitionPoPstateHistoryBucketPlatformSubCustomer.csv",
VAR.Attribute="PlatformPortfolio.sum",
VAR.UnitOfAnalysis="PoPstateCode",
UnlabeledValue="Unlabeled",
ColumnPrefix="pPlat",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
state.competition.combined<-plyr::join(state.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_location_SP_DefenseCompetitionPoPstateHistoryBucketPlatformSubCustomer.csv",
VAR.Attribute="SimpleArea",
VAR.UnitOfAnalysis="PoPstateCode",
UnlabeledValue="Mixed or Unlabeled",
ColumnPrefix="pPSR",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
#
state.competition.combined<-plyr::join(state.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_location_SP_DefenseCompetitionPoPstateHistoryBucketPlatformSubCustomer.csv",
VAR.Attribute="ProductOrServiceArea",
VAR.UnitOfAnalysis="PoPstateCode",
UnlabeledValue="Unlabeled",
ColumnPrefix="pPsc",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
state.competition.combined<-plyr::join(state.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Location_SP_DefenseCompetitionPricingVehiclePoPstateHistory.csv",
VAR.Attribute="Pricing.Mechanism.hypothesis.detail",
VAR.UnitOfAnalysis="PoPstateCode",
UnlabeledValue="Unlabeled",
ColumnPrefix="pPrice",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
state.competition.combined<-plyr::join(state.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Location_SP_DefenseCompetitionPricingVehiclePoPstateHistory.csv",
VAR.Attribute="Pricing.Mechanism.Fee",
VAR.UnitOfAnalysis="PoPstateCode",
UnlabeledValue="Unlabeled",
ColumnPrefix="pFee",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
state.competition.combined<-plyr::join(state.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Location_SP_DefenseCompetitionPricingVehiclePoPstateHistory.csv",
VAR.Attribute="Vehicle.IDVorAward",
VAR.UnitOfAnalysis="PoPstateCode",
UnlabeledValue="Unlabeled",
ColumnPrefix="pIDV",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
# debug(statistics.pivot)
state.competition.combined<-plyr::join(state.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Location_SP_DefenseCompetitionPricingVehiclePoPstateHistory.csv",
VAR.Attribute="Vehicle.hypothesis",
VAR.UnitOfAnalysis="PoPstateCode",
UnlabeledValue="Unlabeled",
ColumnPrefix="pVeh",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
state.competition.combined<-plyr::join(state.competition.combined,statistics.pivot(
VAR.Path=Path,
competition.file.name="data\\defense_Location_SP_DefenseCompetitionPricingVehiclePoPstateHistory.csv",
VAR.Attribute="Competition.detail",
VAR.UnitOfAnalysis="PoPstateCode",
UnlabeledValue="Unlabeled",
ColumnPrefix="pComp",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
))
state.competition.combined<-plyr::join(state.competition.combined,competition.statistics.offers(
Path,
"data\\defense_Location_SP_DefenseCompetitionPricingVehiclePoPstateHistory.csv",
"PoPstateCode",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
)
)
state.competition.combined<-plyr::join(state.competition.combined,
competition.statistics.size(Path
,"data\\Defense_Location_SP_ContractSizeforCompetitionStudy.csv"
,"PoPstateCode",
LimitFiscalYear=2014,
ExcludeFiscalYear=FALSE
)
)
summary(state.competition.combined)
state.competition.combined$Exclude<-FALSE
state.competition.combined$Exclude[state.competition.combined$PoPstateCode %in% c("VI",
"AS",
"MP",
"AE",
"PW",
"US",
"UK",
"GM",
"GB",
"JA",
"ON",
"QC",
"   ",
"BC")]<-TRUE
StateFit <- lm(pEffComp ~
pPSRServices  +
pPlatAir +
pIDV +
pPriceFixed+
I(pPriceFixed^2)+
pPscEngines+
pPscPAMS+
pPscOther,
data=StateList)
summary(StateFit)
plot(StateFit)
#   ,header=TRUE
, sep=","
, row.names=FALSE
, append=FALSE
)
# state.competition.combined<-cbind(state.competition.combined,
#                               predict(StateFit,state.competition.combined,interval="prediction",level=0.90)
#                               )
# state.outside.interval<-subset(state.competition.combined,lwr>pEffectiveComp|upr<pEffectiveComp)$PoPstateCode
#
#
#
# state.competition.2014<-competition.statistics(
#     "",
#     "data\\2014DefenseCompetitionByPlatformAreaPoP.csv",
#     "PoPstateCode",
#     2014
# )
#
#
# state.competition.2014<-plyr::join(state.competition.2014,competition.statistics.offers(""
#                                                                                         ,"data\\2014DefenseCompetitionVehicleByPlatformAreaPoP.csv"
#                                                                                         ,"PoPstateCode"
#                                                                                         ,2014
# )
# )
#
# state.competition.2014<-cbind(state.competition.2014,
#                               predict(StateFit,
#                                       state.competition.2014,
#                                       interval="prediction",
#                                       level=0.95)
# )
# subset(state.competition.2014,lwr>pEffectiveComp|upr<pEffectiveComp)$PoPstateCode
#
#
#
#
# write.table(state.competition.2014
#             ,file="Output\\2014_defense_state_competition_combined.csv"
#             #   ,header=TRUE
#             , sep=","
#             , row.names=FALSE
#             , append=FALSE
# )
#
# write.table(state.competition.combined
#             ,file="Output\\2000_2013_defense_state_competition_combined.csv"
#             #   ,header=TRUE
#             , sep=","
#             , row.names=FALSE
#             , append=FALSE
# )
